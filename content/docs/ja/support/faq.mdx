```
---
title: よくある質問
---

## 💰 クォータ関連の質問

<Callout type="info" title="クォータとは何ですか？どのように計算されますか？" collapsible>
  クォータ計算式は以下の通りです。
</Callout>

    クォータ = グループ倍率 * モデル倍率 * （プロンプトトークン数 + 補完トークン数 * 補完倍率）

    補完倍率の説明：

    - GPT3.5：1.33に固定

    - GPT4：2に固定（公式と一致）

    注意事項：

    - 非ストリーミングモードでは、公式APIは消費された総トークンを返しますが、プロンプトと補完の消費倍率は異なります。

    - New API のデフォルト倍率は公式倍率と一致しており、調整済みです。

<Callout type="info" title="アカウントのクォータは十分なのに、クォータ不足と表示されるのはなぜですか？" collapsible>
  これは、トークンクォータとアカウントクォータが別々であるためです。
</Callout>

    - トークンクォータは最大使用量制限の設定にのみ使用されます。
    - ユーザーはトークンクォータを自由に設定できます。
    - トークンクォータが十分か確認してください。

## 🔧 チャネル設定の問題

<Callout type="info" title="チャネルにおける「重み」と「優先度」とは何ですか？" collapsible>
  重みと優先度は、チャネルの使用順序と割り当てを制御する2つの重要なパラメータです。
</Callout>

    - 優先度（Priority）：数字が大きいほど優先度が高く、優先度の高いチャネルが優先的に使用されます。

    - 重み（Weight）：同じ優先度のチャネル内で、重みの比率に応じてリクエストが割り当てられます。

    例：

    - 優先度2のチャネルは、優先度1のチャネルよりも優先的に使用されます。

    - 同じ優先度1の2つのチャネルで、重み比が2:1の場合、リクエストは2:1の比率で割り当てられます。

<Callout type="info" title="利用可能なチャネルがありませんと表示されますか？" collapsible>
  以下の設定を確認してください。
</Callout>

    1. ユーザーグループ設定
    2. チャネルグループ設定
    3. チャネルのモデル設定

<Callout
  type="info"
  title="チャネルテストエラー：invalid character '<' looking for beginning of value"
  collapsible
>
  このエラーは、戻り値が有効なJSONではなく、HTMLページであることを示します。
</Callout>

    最も可能性の高い原因は、デプロイサイトのIPまたはプロキシノードがCloudFlareによってブロックされることです。

<Callout
  type="info"
  title="チャネルテストエラー：倍率または価格が設定されていません。管理者に連絡して設定してください。"
  collapsible
>
  「システム設定 - 運用設定 - モデル倍率設定」で倍率または価格が設定されているか確認してください。
</Callout>

    または、「システム設定 - 運用設定」で「自己利用モード」を有効にしてください。

## 🌐 デプロイと接続の問題

<Callout type="info" title="ChatGPT Next Web エラー：Failed to fetch" collapsible>
  以下の点を確認してください。
</Callout>

    1. デプロイ時に BASE_URL を設定しないでください。
    2. APIアドレスとAPIキーが正しく入力されていることを確認してください。
    3. HTTPSが有効になっているか確認してください（ブラウザはHTTPSドメイン下のHTTPリクエストをブロックします）。

<Callout type="info" title="エラー：現在のグループ負荷は飽和状態です。しばらくしてからもう一度お試しください。" collapsible>
  これは、アップストリームチャネルで429エラー（リクエストが多すぎます）が発生したことを意味します。
</Callout>

## 📦 データベースとアップグレードの問題

<Callout type="info" title="アップグレード後、データは失われますか？" collapsible>
  データベースの種類によって異なります。
</Callout>

    - MySQL：データは失われません。
    - SQLite：one-api.db データベースファイルを永続化するために、デプロイコマンドに従ってボリュームをマウントする必要があります。そうしないと、コンテナ再起動後にデータが失われます。

<Callout type="info" title="アップグレード前にデータベースを変更する必要がありますか？" collapsible>
  通常は必要ありません。システムは初期化時に自動的に調整します。
</Callout>

    特別な処理が必要な場合は、更新ログで説明され、対応するスクリプトが提供されます。

<Callout
  type="info"
  title="データベースを手動で変更した後、エラー：データベースの整合性が破損しています。管理者に連絡してください。"
  collapsible
>
  このエラーは、abilityテーブルで無効なチャネルIDレコードが検出されたことを示します。一般的な原因：
</Callout>

    - channelテーブルのレコードを削除する際に、abilityテーブル内の無効なチャネルが同期的にクリーンアップされなかった。
    - 各チャネルがサポートするモデルは、abilityテーブルに対応するレコードが必要です。

<Callout type="info" title="お探しの質問が見つかりませんか？">
  もしここにあなたの質問への回答がない場合は、以下をご利用ください。
</Callout>

    1. [インストールとデプロイのドキュメント](../installation) を参照する
    2. [GitHubでissueを提出する](feedback-issues.md)
    3. [QQ交流グループに参加して助けを求める](community-interaction.md)
```