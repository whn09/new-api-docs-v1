---
title: 视频生成 API
---

调用视频生成接口生成视频，支持多种视频生成服务：

- **可灵AI (Kling)**: [API文档](https://app.klingai.com/cn/dev/document-api/apiReference/commonInfo)
- **即梦 (Jimeng)**: [API文档](https://www.volcengine.com/docs/85621/1538636)
- **Gemini**: Google的视频生成服务
- **Vidu**: 高质量视频生成服务

## NewAPI 视频生成格式

### API 端点

```
POST /v1/video/generations
```

### 请求头

| 参数          | 类型   | 必填 | 描述                           |
| ------------- | ------ | ---- | ------------------------------ |
| Authorization | string | 是   | 用户认证令牌 (Bearer: sk-xxxx) |
| Content-Type  | string | 是   | application/json               |

### 请求参数

| 参数            | 类型    | 必填 | 描述                                                                 |
| --------------- | ------- | ---- | -------------------------------------------------------------------- |
| model           | string  | 是   | 模型/风格ID                                                          |
| prompt          | string  | 是   | 文本提示词                                                           |
| duration        | number  | 否   | 视频时长（秒）                                                       |
| fps             | integer | 否   | 视频帧率                                                             |
| height          | integer | 否   | 视频高度                                                             |
| width           | integer | 否   | 视频宽度                                                             |
| image           | string  | 否   | 图片输入（URL/Base64）                                               |
| metadata        | object  | 否   | 供应商特定/自定义参数（如 negative_prompt, style, quality_level 等） |
| n               | integer | 否   | 生成视频数量                                                         |
| response_format | string  | 否   | 响应格式                                                             |
| seed            | integer | 否   | 随机种子                                                             |
| user            | string  | 否   | 用户标识符                                                           |

### 请求示例

#### 可灵AI 示例

```bash
curl https://你的newapi服务器地址/v1/video/generations \
  --request POST \
  --header 'Authorization: Bearer sk-xxxx' \
  --header 'Content-Type: application/json' \
  --data '{
  "model": "kling-v1",
  "prompt": "一个穿着宇航服的宇航员在月球上行走, 高品质, 电影级",
  "size": "1920x1080",
  "image": "https://h2.inkwai.com/bs2/upload-ylab-stunt/se/ai_portal_queue_mmu_image_upscale_aiweb/3214b798-e1b4-4b00-b7af-72b5b0417420_raw_image_0.jpg",
  "duration": 5,
  "metadata": {
    "seed": 20231234,
    "negative_prompt": "模糊",
    "image_tail": "https://h1.inkwai.com/bs2/upload-ylab-stunt/1fa0ac67d8ce6cd55b50d68b967b3a59.png"
  }
}'
```

#### 即梦AI 示例

```bash
curl https://你的newapi服务器地址/v1/video/generations \
  --request POST \
  --header 'Authorization: Bearer sk-xxxx' \
  --header 'Content-Type: application/json' \
  --data '{
  "model": "jimeng_vgfm_t2v_l20",
  "prompt": "一个穿着宇航服的宇航员在月球上行走",
  "image": "https://h2.inkwai.com/bs2/upload-ylab-stunt/se/ai_portal_queue_mmu_image_upscale_aiweb/3214b798-e1b4-4b00-b7af-72b5b0417420_raw_image_0.jpg",
  "metadata": {
    "req_key": "jimeng_vgfm_i2v_l20",
    "image_urls": [
      "https://h2.inkwai.com/bs2/upload-ylab-stunt/se/ai_portal_queue_mmu_image_upscale_aiweb/3214b798-e1b4-4b00-b7af-72b5b0417420_raw_image_0.jpg"
    ],
    "aspect_ratio": "16:9"
  }
}'
```

#### Vidu 渠道示例

```bash
curl https://你的newapi服务器地址/v1/video/generations \
  --request POST \
  --header 'Authorization: Bearer sk-xxxx' \
  --header 'Content-Type: application/json' \
  --data '{
  "model": "viduq1",
  "prompt": "一个穿着宇航服的宇航员在月球上行走, 高品质, 电影级",
  "size": "1920x1080",
  "image": "https://prod-ss-images.s3.cn-northwest-1.amazonaws.com.cn/vidu-maas/template/image2video.png",
  "duration": 5,
  "metadata": {
    "duration": 5,
    "seed": 0,
    "resolution": "1080p",
    "movement_amplitude": "auto",
    "bgm": false,
    "payload": "",
    "callback_url": "https://your-callback-url.com/webhook"
  }
}'
```

### 响应格式

#### 201 - 创建成功

```json
{
  "id": "video_123",
  "object": "video",
  "model": "kling-v1",
  "created_at": 1640995200,
  "task_id": "abcd1234efgh",
  "status": "processing"
}
```

#### 响应字段说明

| 字段       | 类型    | 描述                           |
| ---------- | ------- | ------------------------------ |
| id         | string  | 视频任务ID                     |
| object     | string  | 对象类型，固定为 "video"       |
| model      | string  | 使用的模型名称                 |
| created_at | integer | 创建时间戳                     |
| task_id    | string  | 任务ID，用于查询状态           |
| status     | string  | 任务状态（processing: 处理中） |

## 错误响应

### 400 - 请求参数错误

```json
{
  "code": null,
  "message": "string",
  "param": "string",
  "type": "string"
}
```

### 401 - 未授权

```json
{
  "code": null,
  "message": "string",
  "param": "string",
  "type": "string"
}
```

### 403 - 无权限

```json
{
  "code": null,
  "message": "string",
  "param": "string",
  "type": "string"
}
```

### 500 - 服务器内部错误

```json
{
  "code": null,
  "message": "string",
  "param": "string",
  "type": "string"
}
```

## 支持的模型

### 可灵AI (Kling)

- `kling-v1`: 文生视频模型
- `kling-v2-master`: 图生视频模型

### 即梦 (Jimeng)

- `jimeng_vgfm_t2v_l20`: 文生视频模型
- `jimeng_vgfm_i2v_l20`: 图生视频模型

### Vidu

- `viduq1`: Vidu高质量视频生成模型

## 最佳实践

1. **提示词优化**: 使用详细、具体的描述词，包含风格、质量要求
2. **图片质量**: 图生视频时使用高分辨率、清晰的图片
3. **参数调优**: 根据需求调整时长、分辨率等参数
4. **错误处理**: 实现适当的重试机制和错误处理
5. **异步处理**: 视频生成是异步任务，需要轮询查询状态
